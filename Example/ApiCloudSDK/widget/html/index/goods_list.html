<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <link rel="stylesheet" type="text/css" href="../../css/aui.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/public.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/treads_newxx.css"/>
    <style>
        .aui-bar-nav .aui-title {
            right: 3.5rem;
            left: 3.5rem;
        }

        .aui-tab-item.aui-active {
            border-bottom: none
        }
    </style>
</head>
<body>
<header  style="background: ;" class="aui-bar aui-bar-nav aui-bar-custom aui-border-b" id="header">
    <a class="aui-pull-left" tapmode onclick="closeWin()">
        <span class="aui-iconfont aui-icon-left"></span>
    </a>

    <div class="aui-title">
        {{title}}
    </div>
		<div style="width:100%;" >
			<!--排序-->
			<ul class="sequencing" style="width:100%;float: left;">
				<li class="on" onclick="Screening('', this)">默认排列<i></i></li>
				<li onclick="Screening('price', this)">按价格<span class="icon-arrow_uplift"></span><i></i></li>
				<li onclick="Screening('renqi', this)">按人气<span class="icon-arrow_uplift"></span><i></i></li>
				<li onclick="Screening('xiaoliang', this)">按销量<span class="icon-arrow_uplift"></span><i></i></li>
				<!-- <li id="screening" onclick="ScreenClick()"><span class="icon-screening"></span>筛选</li> -->
				<div class="clearfix"></div>
			</ul>
			<!--END-->
		</div>
    <a class="aui-pull-right" tapmode v-on:click="goodslist_show_way()" style="display:none;">
        <span style="line-height: 2.25rem">
            <img v-if="isA > 0" src="../../image/bj2.png" width="20"/>
            <img v-else src="../../image/bj1.png" width="20"/>
        </span>
    </a>
</header>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript" src="../../script/vue.js"></script>
<script type="text/javascript"  src="../../script/jquery-2.1.3.min.js"></script>
<script>
    var vm = new Vue({
        el: '#header',
        data: {
            cate_id: 0,
            is_new: 0,
            is_rec: 0,
            is_hot: 0,
						is_active:0,
						is_youhui:0,
						is_jieri:0,
						is_songli:0,
						is_chaoliu:0,
						renqi:0,
						xiaoliang:0,
						price:0,
            isA: 1,
						title:"商品分类"
        },
        methods: {
            goodslist_show_way: function () {
                if (vm.isA == 0) {
                    vm.isA = 1;
                } else {
                    vm.isA = 0;
                }
                api.sendEvent({
                    name: 'change_goodslist_show_way',
                    extra: {
                        isA: vm.isA
                    }
                });

            }
        }
    });
    apiready = function () {
        var header = document.querySelector('header');
        $api.fixIos7Bar(header);
        var k = api.pageParam.index ? api.pageParam.index : 0;
        var cate_id = api.pageParam.cate_id;
        vm.cate_id = cate_id;
        vm.is_new = api.pageParam.is_new;
        vm.is_rec = api.pageParam.is_rec;
        vm.is_hot = api.pageParam.is_hot;
				vm.is_active = api.pageParam.is_active;
				vm.is_youhui = api.pageParam.is_youhui;
				vm.is_jieri = api.pageParam.is_jieri;
				vm.is_songli = api.pageParam.is_songli;
				vm.is_chaoliu = api.pageParam.is_chaoliu;
				vm.renqi = api.pageParam.renqi;
				vm.xiaoliang = api.pageParam.xiaoliang;
				vm.price = api.pageParam.price;
				console.log(">>>>>>>>>>>>>>>>>>>1>>>."+api.pageParam.title);
				if(api.pageParam.title!=null&&api.pageParam.title!=""){
					console.log(">>>>>>>>>>>>>>>>>>>>>>."+api.pageParam.title);
					vm.title=api.pageParam.title;
				}
        api.openFrame({
            name: 'goods_list_body',
            url: './goods_list_body.html',
            bounces: true,
            rect: {
                x: 0,
                y: $api.dom('header').offsetHeight,
                w: 'auto',
                h: 'auto'
            },
            pageParam: {
                cate_id: vm.cate_id,
                is_new: vm.is_new,
                is_hot: vm.is_hot,
                is_rec: vm.is_rec,
								is_active:vm.is_active,
								is_youhui:vm.is_youhui,
								is_jieri:vm.is_jieri,
								is_songli:vm.is_songli,
								is_chaoliu:vm.is_chaoliu,
								renqi:vm.renqi,
								xiaoliang:vm.xiaoliang,
								price:vm.price
            }
        })
    };
		/*
		* 点击筛选时的事件
		* type: 0:默认；1：价格；2：人气
		*/
		function Screening(index, lnk){
			order = index;
			$(lnk).siblings().removeClass("on");
			$(lnk).addClass("on");
			if(order == 'renqi' || order == 'price'|| order == 'xiaoliang'){
				if($(lnk).find("span").hasClass("icon-arrow_uplift")){
					by = "desc";
					$(lnk).find("span").removeClass("icon-arrow_uplift").addClass("icon-arrow_descend");
				}else{
					by = "asc";
					$(lnk).find("span").removeClass("icon-arrow_descend").addClass("icon-arrow_uplift");
				}
				if(index == 'price'){
					$(lnk).next().find("span").removeClass("icon-arrow_descend").addClass("icon-arrow_uplift");
				}else{
					$(lnk).prev().find("span").removeClass("icon-arrow_descend").addClass("icon-arrow_uplift");
				}
			}else{
				$("#screening").prevAll().find("span").removeClass("icon-arrow_descend").addClass("icon-arrow_uplift");
				by = "desc";
			}
			var isup=0;
			if(by=="desc"){
				isup=1;
			}else{
				isup=0;
			}
			if(index==""){
				vm.price=0;
				vm.renqi=0;
				vm.xiaoliang=0;
			}
			if(index=="price"){
				vm.price=1;
				vm.renqi=0;
				vm.xiaoliang=0;
			}
			if(index=="renqi"){
				vm.price=0;
				vm.renqi=1;
				vm.xiaoliang=0;

			}
			if(index=="xiaoliang"){
				vm.price=0;
				vm.renqi=0;
				vm.xiaoliang=1;
			}
			api.sendEvent({
				name:'flush_goods',
				extra: {
					price:vm.price,
					renqi:vm.renqi,
					xiaoliang:vm.xiaoliang,
					isup:isup
				}
			});
		}

		//点击筛选时的事件
		function ScreenClick(){
			$("#screening").prevAll().removeClass('on').find("span").removeClass("icon-arrow_descend").addClass("icon-arrow_uplift");
			$("#screening").toggleClass('on');
			by = "desc";
			api.sendEvent({
				name:'screenClick',
				extra: {

				}
			});
		}
</script>
</body>
</html>
<!--l0b36d1463e05189-->
<!--ld309a3c919ab654-->
<!--ce31f2773f0ee636-->
<!--o82a77c036304983-->
<!--a92eb43b32b32888-->
<!--m793316e6a8a7806-->
<!--g3f2a2b2ba9e5849-->
<!--ic9d1749d267c324-->
<!--k23f530558f44314-->
<!--q605bf5461b7a652-->
<!--q52d87b83c3af771-->
<!--acolhqfcnagddmnohhechcgphhahnapbmbhq-->
<!--deiclhjfpekqamipcjfoaakidndienlchdcm-->
